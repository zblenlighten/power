# Knowledge Memo

## Blogs

- [Top 100 on GitHub](https://twosigmaventures.com/open-source-index/)
- [Open Source Libraries](https://opensourcelibs.com/)
- [Netflix](https://medium.com/netflix-techblog)
- [Airbnb](https://medium.com/airbnb-engineering)
- [Uber](https://eng.uber.com/)
- [LinkedIn](https://engineering.linkedin.com/blog)
- [Facebook](https://engineering.fb.com)

## Contents

- [Infrastructure](#infrastructure)
- [Data storage](#data-storage)
- [Dataflow](#dataflow)
- [Backend](#backend)
- [Frontend](#frontend)
- [System design](#system-design)
- [Practice](#practice)

## Development

### Infrastructure

- Architecture: organize business, technology and staff to drive business growth
  - Application Landscape
    - Monolith
      - Cons: agility, scalability, fault tolerance, single framework
    - Multitier architecture (N-tier): an MVC design is often implemented using an 3-tier architecture
    - Service-oriented architecture (SOA)
    - Microservices
      - Pros: single capabilities, independent as product, decoupling, continuous delivery, componentization, autonomy, scalability
      - When not to use: small, intermingled functionality or data, performance sensitive, quick and dirty, no planned updates
      - Service Mesh
        - Istio
        - Data Plane - Control Plane
      - Service discovery (SDP)
      - Reactive system (vs: Declarative system)
      - Challenges
        - Design and runtime complexity
        - Network are slow compared to monolith
    - Serverless (run in stateless compute containers that are event triggered)
      - Principles: Invisible infrastructure, Automatic scaling, No paying for unused CPU cycles
      - Function as a Service
        - AWS Lambda 
        - Google Cloud Functions
      - Backend as a Service
        - Firebase
    - Peer-to-peer
  - Distributed system (storage + computation + messaging)
    - Fault-tolerant Consensus: for solving consensus in a network
      - Properties: uniform agreement, integrity, validity, termination
      - Algorithms: Paxos, Zab (ZooKeeper)
      - ZooKeeper (Chubby)
        - Features: linearizable atomic operations, total ordering operations, failure detection, change notifications
        - Central coordinator: manage state and hold configuration (Zookeeper ensemble)
        - Recover from partial failures: master crashes, worker crashes, network trouble
        - Service discovery: leader election
        - Membership / coordination service
    - RPC
      - Thrift & Avro
      - gRPC: HTTP/2 & Protocol Buffers
      - Finagle: Futures
    - Load balancer (Nginx)
      - Hardware LB - Software LB: HAProxy
      - Algorithms: round robin, round robin with weighted server, least connections, least response time, source IP hash, URL hash
  - Others
    - Single vs Multi-tenant
    - User Interface (UI)
      - MVC: Model-view-controller
      - MVVM: Model–view–viewmodel
  - References
    - [Microservices Patterns](https://microservices.io/patterns/)
    - [Azure Cloud Design Patterns](https://docs.microsoft.com/en-us/azure/architecture/patterns/)

- DevOps
  - Version control
    - Git: branch, tag
  - Infrastructure as code (consider hardware: networks, servers, storage, etc.)
    - Terraform: Write → Plan → Apply
    - Ansible ([YAML](http://www.ruanyifeng.com/blog/2016/07/yaml.html))
    - Provision: Dockerfile / Puppet / Chef
    - [checkov](https://github.com/bridgecrewio/checkov/blob/master/docs/5.Policy%20Index/all.md)
  - Configuration (deploy and configure software: operating systems, applications, etc.)
    - Jenkins (CI/CD: Continuous integration / Continuous delivery / Continuous deployment)
      - JFrog Artifactory
    - Automation vs Orchestration
      - Automation refers to a single task
      - Orchestration refers to the management of many automated tasks, often a complicated ordering with dependencies
  - DevSecOps
    - Toolchain: Pre-commit → Commit (continuous integration) → Acceptance (continuous delivery) → Production (continuous deployment) → Operations
      - Apiiro
    - Legacy tools
      - Static application security testing (SAST): find security bugs
      - Dynamic application security testing (DAST): ZAP, WebInspect
      - Interactive application security testing (IAST)
      - Vulnerability scanning: OpenVAS
      - Others: sqlmap, Recon-ng, OWASP Glue
  - Container
    - [Docker](http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html)
      - Manage kernel features
        - cgroups: processes
        - namespaces: networks
        - copy-on-write: unionfs
      - Docker components
        - Dockerfile → Docker Client → Docker Host (images, containers, volumes) → Docker Registry
        - Dockerfile: multi-stage builds, [linter](https://github.com/hadolint/hadolint)
      - Nvidia docker
    - Kubernetes (vs: Docker compose, Docker swarm)
      - Pod - Node - Cluster
      - ReplicaSet
      - etcd
  - Monitor
    - Synthetic check and uptime (is it working?)
    - Software component metrics
    - System metrics
    - App metrics
    - Performance
      - Application performance management (APM)
      - Real user monitoring (RUM)
    - Tools
      - Prometheus (service oriented)
        - Metric [types](https://prometheus.io/docs/concepts/metric_types/)
        - Grafana
      - Zabbix (ip oriented)
      - Datadog
  - Logging
    - Collection → Transport → Storage → Analysis → Alerting
    - Centralized Logging
    - ELK (Elastic)
      - Elasticsearch
      - Logstash (vs: Fluentd): Data collection pipeline
        - Filter plugin: Grok (log parser)
        - Input plugin: Twitter
      - Kibana: Viewer with filter capabilities
        - Kibana Query Language (KQL)
      - [Beats](https://www.elastic.co/guide/en/beats/libbeat/current/beats-reference.html): Data shipping
  - Security
    - Penetration test
    - Vault
      - Data in transit: TLS encrypts data between server and client (asymmetric) 
      - Internal data: AES256 (symmetric, faster)
      - Key sharding: the master key is split into several unseal keys using Shamir's Secret Sharing (two-man rule)
      - Authentication: data that must be kept confidential is a secret, access to secret is performed by token
        - wrap-ttl: generate a wrapping token
      - Policy (Authorization): policy is associated to tokens and grants capabilities to a secrets engine path
      - AppRole: Jenkins
    - [Web Application Security Checklist](https://www.appsecmonkey.com/blog/web-application-security-checklist)
  - Reliability
    - Mean time to recovery (MTTR)
    - Mean time between failures (MTBF)
    - Chaos Monkey
    - Hystrix (Circuit Breaker pattern: cascading failures)
    - Profiler
  - Testing: Code coverage
  - Others
    - Heroku (dynamic page)
    - OpenStack
    - Vagrant: synced folder, networking, provider (hypervisor), provisioner
    - Packer: co-ordinates the lifecycle of image (for containers and virtual machines) creation, provision with simple scripting or configuration management tool such as Ansible

### Data storage

- Knowledge
  - Storage Engines
    - Log-structured storage engine: SSTable → LSM Tree
      - Database: LevelDB, Cassandra, HBase, Lucene
    - Page oriented storage engine: B tree
      - All major relational databases and some nonrelational ones
  - Indexing structures
    - Primary key & Secondary index
    - Multi-column index: R tree
    - Fuzzy index (full-text search)
    - clustered index vs nonclustered index
  - Query Tuning
    - Index types
      - B tree
      - Bitmap
      - Hash
      - Specialized index
    - Joins (PostgreSQL: vacuum & analyze)
      - Nestloop
      - Hashjoin
      - Mergejoin
    - Partitioning / [Sharding](https://www.digitalocean.com/community/tutorials/understanding-database-sharding) (horizontal partitioning)
      - Range
      - List
      - Hash
    - Materialized view (vs: view) - OLAP Cube
  - Filesystem ACL (file vs blob: binary large object)
    - blob storage: relational db, file system, object storage (Ceph), cloud storage
  - Replication
    - Approaches
      - Single leader
      - Multi leader
      - Leaderless
    - Write conflict resolution
      - [Conflict-free replicated data type](https://en.wikipedia.org/wiki/Conflict-free_replicated_data_type) (CRDT)
      - Operational transformation ([demo](http://operational-transformation.github.io)): Google Docs
  - Partition
    - Approaches: Key range, Hash of key
    - Secondary index (full-text index is a particular kind of secondary index)
      - Document partitioned index / Local index: scatter/gather (tail latency amplification)
      - Term partitioned index / Global index (more efficient reads, however more complicated writes)
  - Transaction
    - [Transaction log](https://en.wikipedia.org/wiki/Transaction_log)
      - [Log-based Incremental Replication](https://www.stitchdata.com/docs/replication/replication-methods/log-based-incremental)
      - Log compaction
    - Safety guarantees (ACID, vs: BASE, Basically Available, Soft state, Eventual consistency)
      - Atomicity
      - Consistency: maintain database invariants (a transaction can only bring the database from one valid state to another)
      - Isolation: avoid race conditions due to concurrently executing transactions
        - Serializability
          - Pessimistic concurrency control: Java synchronized, MySQL exclusive lock (InnoDB locking)
            - Actual serial execution
            - Two-phase locking (2PL): provide serializable isolation
          - Optimistic concurrency control: version, timestamp, compare and swap (CAS)
            - Serializable snapshot isolation (SSI)
        - Snapshot isolation (Repeatable reads)
          - Implementation: multi-version concurrency control (MVCC)
          - Problems: Lost updates, Write skew
        - Read committed (vs: Read uncommitted)
      - Durability
  - Consensus (recency guarantee)
    - Linearizability / Sequential consistency: coordinate the state of replicas in the face of delays and faults
      - CAP: Consistency, Availability, Partition tolerance
        - CP (Linearizability) vs AP (BASE: Basically Available Soft state Eventual consistency)
    - Total order broadcast
    - Two-phase Commit (2PC): provide atomic commit in a distributed database
  - Connection pooling - [Bulkhead](https://docs.microsoft.com/en-us/azure/architecture/patterns/bulkhead)

- RDBMS (Relational Database Management System)
  - Pros: SQL, normalized data (minimize chances of introducing problem), widely used across domains, widely supported
  - Cons: fixed schema (each record), costly to join tables, limited data structures, difficult to horizontal scale (vertically scalable)
    - Workarounds: denormalization, sharding, replication (master and read replicas)
  - SQL query → Server connector → Parser (parse tree) → Optimization → Execution (InnoDB vs MyIsam, [区别](https://www.zhihu.com/question/20596402))
  - Keys: Super key, Candidate key, Primary key, Foreign key
  - PrepareStatement
    - Get pre compiled and access plan cached in database
    - Prevent SQL Injection attacks
  - Database normalization
    - Organizing the columns (attributes) and tables (relations) to ensure that their dependencies are properly enforced by database integrity constraints
    - Normal forms
    - Denormalization: the process of trying to improve the read performance by adding redundant copies of data or by grouping data, avoid joins
  - [ORM](http://www.ruanyifeng.com/blog/2019/02/orm-tutorial.html): Object-relational mapping
  - TiDB ([tutorial](https://pingcap.com/tidb-academy/))

- NoSQL
  - Pros: flexible schemas, distributed (horizontally scalable, designed to be scaled across multiple servers), replication
  - Key-value (fast & light: caching stores, managing user sessions, ad servicing, recommendations)
    - LevelDB, Dynamo, Redis ([点赞功能](https://juejin.im/post/5bdc257e6fb9a049ba410098), vs: [Ignite](https://github.com/apache/ignite))
  - Wide-column (reduce disk resources & fast querying and processing: big data store)
    - Cassandra
      - Table - Keyspace
      - Primary key - **Partition** key - Cluster key
      - Index: primary - secondary - cost
      - Replication: leaderless (no master node → no single point of failure)
      - Gossip protocol
      - CQL, CQLSH
      - Tips
        - data is denormalized and ordered: no normalization
        - eventually consistent so read operation can return inconsistent data: read from multiple replicas
        - data duplication and missing columns are common
        - [Why Cassandra Doesn’t Need Vector Clocks](https://www.datastax.com/blog/why-cassandra-doesnt-need-vector-clocks)
    - HBase
  - Document (schema flexibility: managing user profiles (XML or JSON documents) )
    - MongoDB
      - Document - Collection - Database
      - Replication: single leader
      - Support many indices (only one can be used for sharding): text search, geospatial
    - CouchDB
    - [Elasticsearch](http://www.ruanyifeng.com/blog/2017/08/elasticsearch.html)
      - Document with properties - Index
        - Scheme-free JSON (distributed document storage)
      - Search engine
        - Characteristics: text centric, read dominant, document oriented, large volumes of data, flexible schema
        - **Solr** (Lucene, Inverted Index)
          - Solr core - Jetty web server - Java JVM
          - Documents, fields and schema design
            - Solr's data modeling consists of denormalized documents, meaning all the data that belongs to an entity is in the same document
          - Indexing
            - Updating parts of documents: atomic updates, in-place updates, optimistic concurrency (version)
            - Commit: data sent to Solr is not searchable until it has been committed to the index
              - auto commit: tradeoff between performance and accuracy
            - Nested child documents
            - Reindexing: schema changes, Solrconfig changes, upgrade
          - Text Analysis
            - Analyzer - Tokenizer - Filter
          - Searching
            - Relevance score (e.g. TF-IDF)
            - Near real time searching: soft commit (vs: hard commit)
            - Request handlers (SearchHandler) → Search components (QueryComponent) → Query parser (Lucene)
            - Query syntax and parsing
              - Query parameters
              - Standard query parser
                - Term modifiers: wildcard search, fuzzy search, range search, boosting
            - Faceted search: field faceting, query faceting, range faceting
      - Percolator: search on streams
  - Graph database
    - Neo4j (property graph model, vs: triple-store model)
      - Graph: hierarchical or nonhierarchical, number of nodes and edged, the longest distance between nodes
      - Nodes (entity) - Properties (columns in a relational database table)
      - Edges (relationship): directed or undirected, symmetric or asymmetric
      - Cypher query language
      - Tips
        - Traverse paths instead of joins
        - Identify important nodes
        - Consider the weigh of edges
        - Beware of cycles: it's possible to visit same node repeatedly
  - Ledger
    - Hyperledger
  - Others
    - Sequence database (e.g. GenBank)

- Data Warehouse
  - Analytic systems (OLAP: online analytical processing)
    - Database (Data warehouse): Hive, Teradata, Greenplum
    - Column-oriented (Bitmap index)
    - Vectorized Processing in CPU cache
    - Cloud data warehouse: Redshift, BigQuery, Ads Data Hub, Azure Synapse Analytics, Snowflake
    - Dimensional model (vs: normalized model, e.g. 3NF data model)
      - [Star Schema vs Snowflake Schema](http://www.ssglimited.com/blog/data-warehouse-design-star-schema-vs-snowflake-schema/)
    - High availability and low latency (business Intelligence: optimization for analytic access patterns)
  - Transaction processing systems (OLTP: online transaction processing)
    - Database: MySql, PostgreSQL, Oracle
    - Row-oriented

- Cache
  - Types
    - Application server cache: placing a cache on request layer node enables the local storage of response data
    - Distribute cache: each of its nodes own part of cached data, the cache is divided up using a consistent hashing function
    - Global cache: all nodes use the same single cache space
    - Content delivery network (**CDN**): first request ask the CDN for data, if not, CDN will query the backend servers
      - Fastly, Cloudflare vs Amazon CloudFront
      - Static page vs Dynamic page (CGI)
      - [CDN工作原理及其在淘宝图片业务中的应用](https://blog.csdn.net/taobaojishu/article/details/110458820)
  - Client-side cache: Varnish
  - Cache coherence / invalidation
    - Writing policies
      - Write-through cache: data is written to cache & DB at the same time, this minimizes the risk of data loss, but higher latency for write 
      - Write-around cache: data is written directly to DB, this reduces flooded write operations, but creates a cache miss
      - Write-back cache: data is written to cache alone, this results in low latency & high throughput, but comes with the risk of data loss in case of crash
    - Distributed lock manager (DLM)
  - [Cache replacement policies](https://en.wikipedia.org/wiki/Cache_replacement_policies)

- Hadoop
  - **HDFS** (Hadoop Distributed File System: NameNode - DataNode, Storage)
  - **Yarn** (resource manager, compute)
    - Mesos (vs: Kubernetes)
  - **MapReduce** (distributed computation: input, split, map, shuffle, reduce, output)
    - Reduce-side joins
      - Sort-merge joins
    - Map-side joins
      - Broadcast hash joins (Spark SQL)
      - Partitioned hash joins
  - Spark (Livy)
    - Resilient Distributed Dataset (RDD) - DataSet
      - Fault tolerance: tracking the the intermediate states of the data
    - Components: Spark Core - Spark SQL - spark.ml - Spark Streaming - GraphFrames (Pregel API)
    - Spark streaming (work on microbatching)
      - Batch interval vs Slide interval vs Window interval
    - Databricks
      - Optimization
        - Data: compress, partition, convert to optimized formats (e.g. Parquet), Databricks Delta
        - Job: Spark configuration, Spark executor count, Spark executor size, machine learning algorithm selection / configuration, hyperparameter selection
        - Cluster: add memory / CPU / GPU, increase number of nodes
      - [Comparison of Delta Lake, Iceberg and Hudi](https://databricks.com/session_na20/a-thorough-comparison-of-delta-lake-iceberg-and-hudi)
    - Tez (coordinated by YARN)
  - Pig (AvroStorage, Skewed Joins)
  - Hive (vs: Impala)
    - HiveQL (easier OLAP query than Mapreduce in Java), scalable, interactive
    - High latency (not appropriate for OLTP), no transactions, no record (because under the hood there are no real database)
  - HBase ([Bigtable](https://en.wikipedia.org/wiki/Bigtable), vs: Accumulo)
    - ZooKeeper
    - Access ways: HBase shell, Java API, Spark, Hive, Pig, Rest API, Thrift, Avro
  - Data ingestion: Sqoop (relational database), Flume (source → channel → sink), Kafka
  - Query engine: Hue, Drill (Dremel), Phoenix (HBase), [Presto](https://prestodb.io/docs/current/overview/concepts.html)

- Others
  - How to Choose: Integration, Scaling, Support(security, budget), Simplicity
    - Types of analyze to structure data
      - Machine learning and statistics: tables and data frames
      - Real time analysis: queues and streams
      - Network analysis: graphs
    - Comparisons: [MongoDB vs MySQL](https://www.simform.com/mongodb-vs-mysql-databases), [MongoDB vs Elasticsearch](https://mindmajix.com/mongodb-vs-elasticsearch), [Inmon vs Kimball](https://www.zentut.com/data-warehouse/kimball-and-inmon-data-warehouse-architectures/)
  - References
    - Clustered index: [Clustered table in BigQuery](https://cloud.google.com/bigquery/docs/clustered-tables)
    - [List of data engineering tools](https://github.com/igorbarinov/awesome-data-engineering)

### Dataflow

- Knowledge
  - Schema evolution
    - Rolling upgrade
    - Backward compatibility: newer code read data that was written by older code (vs: Forward compatibility)
      - Full compatibility
    - Encoding / Serialization: from data structures in memory to self-contained sequence of bytes, **write** to file or send over network (e.g. [Java serialization](https://www.geeksforgeeks.org/serialization-in-java/), [Python pickle](https://www.liaoxuefeng.com/wiki/1016959663602400/1017624706151424))
    - Decoding / Deserialization / Parsing: bytes to string, **read** or receive
    - Textual formats: JSON, XML, CSV
    - Binary encoding formats: Thrift, Protocol Buffers, Avro
  - Modes of dataflow
    - Database
    - Service calls (RPC vs REST API)
    - Asynchronous message passing (via message broker or [actor](https://github.com/akka/akka))

- Data Integration
  - **ETL** (Extract - Transform - Load)
    - Data validations: file validations & archival (data source → staging / data lake & data transformation)
    - Business validations: calculations & aggregations (staging → data warehouse - data mart)
    - Airflow (web server + scheduler + metadata database + executor + worker, vs: Luigi)
      - Directed Acyclic Graph (DAG)
      - Operator: action, transfer, sensor
      - Executor: Sequential, Local, Celery, K8s (get the tasks to run from its internal queue and specify how to execute it)
        - Celery: tasks queues to distribute work across threads or machines
      - CI/CD pipeline with Airflow image containing DAGs: Github repo → Jenkins → K8s → Pod
      - Metrics: counters, gauges, timers (TIG: Telegraf, InfluxDB, Grafana)
    - dbt: data build tool
      - [airflow dbt demo](https://github.com/astronomer/airflow-dbt-demo)
    - Great Expectations: data testing
  - Batch: file (a sequence of bytes)
    - Problems: partitioning, fault tolerance
    - Graph processing: GraphChi, Pregel (PageRank)
  - Stream: event (a record of something that happened at some point in time)
    - Windows: Tumbling window, Hopping window, Sliding window, Session window
    - Stream joins: stream-stream, stream-table, table-table
    - Problems: fault tolerance and exactly-once semantics
      - Microbatching and Checkpointing, Transaction, Idempotent writes
    - Storm (work on individual events, truly real-time processing compared with Spark streaming)
      - Tuples: Topology (Spouts and Bolts)
      - Nimbus - Zookeeper - Supervisor
    - Flink (faster than Storm, work on events, highly scalable, fault tolerant using [state snapshots](https://ci.apache.org/projects/flink/flink-docs-master/docs/learn-flink/fault_tolerance/))
      - Standalone cluster / YARN on Hadoop / Cloud / Local - Flink runtime - API
  - Database and Stream: keeping systems in sync
    - Capture the changelog (downside: asynchronous)
      - Change data capture (CDC)
      - Event sourcing
    - Command query responsibility segregation (CQRS): deriving several views from the same event log

- Message broker
  - Message: a client's request of a sequence of bytes with some metadata
  - Advanced Message Queuing Protocol (AMQP) / Java Message Service (JMS) style message broker
    - Situation: expensive message processing, parallelize processing on a message-by-message basis, and message ordering is not so important
    - ZeroMQ, ActiveMQ, RabbitMQ
  - Log based message broker
    - Situation: high message throughput, each message is fast to process, and message ordering is important
    - Kafka
      - Offsets - Segments - Partitions - Topics
        - Bootstrap server (connection + metadata request)
        - Topic partitioning: what if a topic gets too big for one computer or one computer is not reliable
          - Partitions count (each partition for a single topic runs at a throughput of about 10 MB/s)
          - Replication factor (set to 3 as default)
          - It is recommended that each broker to have up to 4K partitions and each cluster to have up to 200K partitions
          - Log compaction
          - Advertised Host: advertised.host.name, advertised.listeners
      - Core APIs
        - Producer
          - Configuration
            - acks
              - 0: it's ok to lose data
              - 1: replica is not guaranteed
              - all: leader and replicas ack requested, add latency and safety
                - Must be used in conjunction with min.insync.replicas
            - retries, delivery.timeout.ms, max.in.flight.request.per.connection (set to 1 to ensure ordering of retries)
            - enable.idempotence (set to true to prevent duplicates)
            - compression.type ([snappy](https://github.com/google/snappy)), linger.ms, batch.size
          - Keys: key to partition hashing (unless the number of partition changes, vs: round robin)
          - Example: RTSP (Real time streaming protocol) producer
        - Consumer
          - read data from a topic in order within each partitions (subscribe vs assign to a partition and seek to offsets)
          - Consumer groups (same group read from mutually exclusive partitions)
            - lag = log end offset - current offset
            - reset offset
            - rebalancing (when a consumer joins or leaves a group)
          - Consumer offsets
            - Message delivery semantics: at most once, at least once, exactly once)
          - Internal threads
            - Detecting consumer down: Heartbeat.interval.ms (Session.timeout.ms)
            - Detecting big data processing issue: max.poll.interval.ms
          - Schema registry
        - Kafka Connect (Source connector / Sink connector)
          - CDC connector → Search index (e.g. Solr) / Database / Data warehouse / Cache
        - Kafka Streams (ksqlDB)
      - Zookeeper (leader + followers)
        - Manages brokers
        - Performs leader election for partitions
        - Sends notifications
      - Others
        - Cluster (the minimum number of nodes in Zookeeper is 3 because of the quorum attribute)
          - Replication (multiple clusters): active-passive vs active-active
        - Monitoring (JMX metrics) and Operations
        - Security
      - Reasons to fast
        - Avoids Random Disk Access (sequential write)
        - Memory Mapped Files (mmap)
        - Zero Copy (receives bytes and sends bytes, [原理](https://www.jianshu.com/p/2581342317ce))
        - Batch Data in Chunks
        - Can Scale Horizontally

### Backend

- API
  - RPC: communicates between processes, requests between services owned by the same organization / datacenter
  - [REST](http://www.ruanyifeng.com/blog/2014/05/restful_api.html): public APIs (vs: SOAP)
    - URL = &lt;**scheme**>://&lt;user>:&lt;password>@&lt;**host**>:&lt;port>/&lt;**path**>;&lt;params>?&lt;query>#&lt;fragment>
    - Versioning
      - Version number in the URL
      - HTTP Accept header
    - Media Type & Content-Type
    - Identity Access Management (IAM)
      - Authentication (AuthN: who you are)
        - Basic authentication & Digest authentication
        - Login form, HTTP authentication
        - Key management (cryptographic keys)
      - Authorization (AuthZ: what you can do)
        - Role-based access control (RBAC)
        - URL access controls
        - Access control list (ACL)
          - Filesystem ACL
          - Network ACL
          - SQL ACL
      - References
        - [Intro to IAM](https://auth0.com/intro-to-iam/)
        - [What is IAM](https://www.cloudflare.com/learning/access-management/what-is-identity-and-access-management/)
    - [Architectural constraints](https://restfulapi.net/rest-architectural-constraints/)
  - Design of REST APIs
    - Identify participants
    - Identify activities
    - Break into steps
    - Create API definition
      - Identify the resources
        - Items resource: list, view, search, add, edit
      - Map activities to resource lifecycle (map actions to HTTP Nouns & Verbs)
        - Mapping: GET /items, GET /items/:id, GET /items?search=param, POST /items/, PUT /items/:id
      - Map remaining activities to custom actions
        - Relationships types: Independent, Dependent, Associative
    - Validate API
    - References
      - [How We Design Our APIs at Slack](https://slack.engineering/how-we-design-our-apis-at-slack/)
  - Tools
    - Manager: [WSO2](https://docs.wso2.com/display/AM260/Key+Concepts), Kong, Tyk, Zuul
    - Gateway
      - Core: portal features, security, load balancing, protocol transformation, routing, orchestration
      - Admin: API lifecycle (draft, publish, upgrade, etc.)
      - Monitor: logging for analytics and monitoring
    - Swagger (OpenAPI Specification)
    - REST client tool (e.g. Postman)
    - [API Directory](https://www.programmableweb.com/)

- Design patterns
  - Object oriented programming (OOP): Polymorphism
  - Creational Patterns: Factory, Singleton
  - Structural Patterns: Decorator, Adapter, Facade, Composite, Proxy
  - Behavioral Patterns: Observer, Command, Template, Iterator, State
  - J2EE Patterns: Compound (MVC)
  - Principles (SOLID)
    - Open Close Principle
    - Dependence Inversion Principle
    - Liskov Substitution Principle
    - Single Responsibility Principle
    - Interface Segregation Principle

- Java ([stack frame](https://www.artima.com/insidejvm/ed2/jvm2.html), [field](http://tutorials.jenkov.com/java-reflection/fields.html), jar & war)
  - JVM
    - Architecture: Class Loader - JVM Memory - Execution Engine
    - Application program - Tomcat container - **JVM** process - Operating system - Physical server
  - Spring
    - Core
      - Inversion of Control (IoC) Container
        - Bean life cycle: bean instantiated → dependencies injected → internal Spring processing → custom init method → destroy (except for the "prototype" scoped bean)
      - Annotation: Spring configuration (vs: XML)
        - Inversion of Control: Component
        - Dependency Injection: Autowired, Qualifier, Value, Bean, Configuration, PropertySource
        - Bean scope & life cycle: Scope, PostConstruct, PreDestroy
        - Spring MVC: Controller, RequestMapping, RequestParam, ModelAttribute
        - Hibernate (ORM): Entity, Table, Id, GenerateValue, OneToOne, ManyToOne, OneToMany, ManyToMany
        - Data Access Object (DAO) & Service: Repository, Service, Transactional
    - Spring Aspect oriented programming (AOP)
      - Web layer - Service layer - Repository layer
      - Use cases: logging, security, transaction, exception handling, API management
      - Support: Method-level join points & Run-time code weaving (vs: AspectJ)
      - Annotation: Aspect, Before, AfterReturning, AfterThrowing, After, Around, Pointcut
    - Spring Security (Servlet filter)
      - [Secure a Spring Boot REST API with JSON Web Token](https://medium.com/better-programming/secure-a-spring-boot-rest-api-with-json-web-token-reference-to-angular-integration-e57a25806c50)
    - Spring REST
      - Annotation: RestController, PathVariable, ExceptionHandler, ControllerAdvice, RequestBody
    - Spring Boot (initializr [link](https://start.spring.io/))
      - Solution: perform auto-configuration, provide an embedded HTTP server, resolve dependency conflicts
      - Actuator (endpoints [list](https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#production-ready-endpoints))
      - Property (properties [list](https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html))
    - DAO techniques
      - Hibernate API
        - Fetch: lazy vs eager
      - Standard Java Persistence API (JPA)
      - Spring Data JPA (Spring Data REST)
    - Spring Cloud
    - Projects: [link](https://spring.io/projects)

- Go ([pointer](https://www.runoob.com/go/go-pointers.html), [channel](https://www.runoob.com/w3cnote/go-channel-intro.html))

- Python
  - [cProfile](https://docs.python.org/3/library/profile.html)
  - [Packaging Projects](https://packaging.python.org/tutorials/packaging-projects/)
  - Concurrent and parallel programming: Celery, Pyro5, RPyC, mpi4py, PyCUDA
  - [Dask](https://docs.dask.org/en/stable/dataframe.html)
  - [Awesome Python](https://github.com/vinta/awesome-python)

### Frontend

- Knowledge
  - WWW standards
    - CSS ([animation](https://animate.style/))
    - DOM
    - SVG
    - XML
    - HTML
  - Web
    - Vue.js
      - Vue Instance - Virtual DOM - DOM
      - VueResource, VueRouter, Vuex
        - MVVM: two-way data bindings([双向绑定](https://www.liaoxuefeng.com/wiki/1022910821149312/1109527162256416))
      - Developer Tools: Vue.js devtools
    - GraphQL
  - Mobile
    - SwiftUI
    - WeChat Mini Program
  - Desktop
    - Electron
  - UI component: Bootstrap, Ant Design

### System design

- Distributed System Trade-offs
  - Performance vs Scalability
  - Throughput vs Latency
  - Availability vs Consistency

- Performance
  - **If the system goes slow**: scalability, performance
  - Testing
    - Throughput = # tasks / time
      - hps, tps, qps: number of HTTP requests/Transactions/Queries per second
    - Latency = time / task
    - Number of concurrent sessions/users (Concurrency = throughput * latency)
    - Internal metrics: CPU (interrupts per second), Memory, Network (bandwidth, connection state), Disk I/O, etc.
  - Optimization
    - Global Data Center (multi-data center architecture)
    - Hardware
    - Operating system (Linux: transparent huge page)
    - JVM
    - Infrastructure: web container, database connection pooling, MVC framework
    - Architecture: cache (read-through vs cache-aside), message broker, clustered architecture
    - Programming: algorithms, data structure, design pattern, asynchronous I/O

- Availability
  - **If the system goes down**: resiliency (SPOF: single point of failure), availability, stability
  - Redundancy backup: Load balancing, database with multi master replication
  - Fault and latency tolerance: Hystrix, message broker
  - Flow control & degrade
  - Global server load balancing (GSLB)

- The Architecture Process
  - Understand the System’s Requirements
  - Understand the Non-Functional Requirements (NFR, SLA: Service-level agreement)
  - Map the Components (logic diagram, technical diagram, physical diagram)
  - Select the Technology Stack
  - Design the Architecture
  - Write Architecture Document
  - Support the Team

- Edge Computing
  - Network architectural pattern for compute and storage
    - Networking + Storage + Compute + Management
    - Edge computing leverages federated architectures
  - Components
    - Sensor/Data input
    - Edge device/Computer: processor, solid-state storage (SSD), network interfaces (5G, wifi, bluetooth, etc.), operating system, machine learning (e.g. Raspberry Pi)
    - Cloud-based Central Computer: databases (e.g. AWS IoT)
  - Considerations
    - Security: sensors, device, backend cloud based systems
    - Governance (integrated with all security): use of services, policies
    - Management (device side - cloud side): long-term operation, updates, hardware, network
    - Data management: storage, metadata, security, business continuity, disaster recovery, change management
    - Operations: monitor, consistent, automate, visibility/access/identity
    - AI and machine learning

- Cases
  1. Web crawler
      - BFS & DFS (Overhead time) by Scheduler (Priority queue stores URLs that have been discovered but not yet downloaded)
      - Page analysis and URL extraction (parsing Javascript)
      - URL table (In the case of thousands of servers: 明确每台下载服务器的分工，向散列表发送询问判断URL是否下载)
  2. URL shortening
      - Distributed ID Generator
      - Key-value store
      - URL redirection (302)
  3. Messenger service (feature → architecture)
      - One to one text
      - Sent / Delivered / Read
      - Push notification

- References
  - [服务端高并发分布式架构演进之路](https://segmentfault.com/a/1190000018626163)

### Practice

- WBS (Work breakdown structure)
  - Problem statements: RfQ (Request for quotation), SoW (Statement of work)
  - PoC (Proof of concept)
  - **User story** & Feature list
    - An end user going through a domain-level process to achieve some valuable outcome
    - Who, What, Why, Acceptance Criteria (AC)
  - Architecture design
  - Coding, testing, release
  - Maintenance & Iterative and incremental development

- Development Approach
  - TDD (Test driven): state desired outcome as a test
  - BDD (Behavior driven): base tests on natural language descriptions of business functionality
  - FDD (Feature driven)
  - DDD (Domain driven)
    - Bounded Context
    - Reactive model (publish subscribe model, vs: Declarative model)
      - Entities communication
      - Message broker
    - Event storming: design a system that models the structure and flow of activities within the business itself

- Code Review
  - Programming style
  - Code review best practice
    - [what to look for](https://blog.jetbrains.com/upsource/tag/what-to-look-for/)
    - Human reviewers should be doing what cannot be automated (automate everything you can)
    - Understand the constraints
    - Knowledge sharing (focus on how to understand the code easily)
    - Gateway type code review: should have a list of specific checks (not right time for: design patterns, SOLID, reusability)
    - Reviews should be small
    - Reviewing respond in a timely fashion
    - Comments with Why, When and What

- Project Management
  - Systems development life cycle (SDLC): requirement analysis → design → development and testing → implementation → documentation → evaluation
  - [Agile](http://cheatsheetworld.com/programming/agile-development-cheat-sheet/)
    - Conway's law
    - Agile Release Train (ART)
  - Scrum: Transparency, Inspection, Adaptation
    - Scrum master
  - Waterfall: System and software requirements → Analysis → Design → Coding → Testing → Operations
  - Project Management Committee ([PMC](https://www.apache.org/foundation/how-it-works.html))
  - [RACI](https://en.wikipedia.org/wiki/Responsibility_assignment_matrix)

- Soft Skills
  - [The Guerrilla Guide to Interviewing](https://www.joelonsoftware.com/2006/10/25/the-guerrilla-guide-to-interviewing-version-30/)
  - [What Does a Hiring Manager Do](https://www.indeed.com/career-advice/finding-a-job/hiring-manager)
  - Leadership
    - Vision: articulates a realistic, desirable, and positive future state, indirectly answering where you are going
    - 4 Cs: culture, connectivity, clarity and courage
    - Blueprint: future state, current state, barriers or challenges, enhancers & support, and goals & actions
  - Presentation
    - Good communicator: someone who looks and sounds like they mean what they're talking about
    - Imagining how you want to be perceived will help you focus
    - Delivering one thought at one time
    - Two-way communication
    - Diaphragmatic breathing: taking slow breaths through the nose, and focusing on belly expansion with inhalation
  - Write up report: background, methods, results, conclusion
